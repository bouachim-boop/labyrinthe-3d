<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Labyrinthe 3D Babylon.js</title>
    <style>
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            overflow: hidden;
        }
        canvas {
            width: 100%;
            height: 100%;
            touch-action: none;
        }
    </style>
</head>
<body>

<canvas id="renderCanvas"></canvas>

<!-- Babylon.js CDN officiel -->
<script src="https://cdn.babylonjs.com/babylon.js"></script>

<script>
const canvas = document.getElementById("renderCanvas");
const engine = new BABYLON.Engine(canvas, true);

const createScene = function () {
    const scene = new BABYLON.Scene(engine);

    /* CAMÃ‰RA */
    const camera = new BABYLON.UniversalCamera(
        "camera",
        new BABYLON.Vector3(0, 2, -8),
        scene
    );
    camera.attachControl(canvas, true);
    camera.speed = 0.3;
    camera.checkCollisions = true;
    camera.applyGravity = true;
    camera.ellipsoid = new BABYLON.Vector3(0.5, 1, 0.5);

    /* GRAVITÃ‰ & COLLISIONS */
    scene.gravity = new BABYLON.Vector3(0, -0.9, 0);
    scene.collisionsEnabled = true;

    /* LUMIÃˆRE */
    const light = new BABYLON.HemisphericLight(
        "light",
        new BABYLON.Vector3(0, 1, 0),
        scene
    );

    /* SOL */
    const ground = BABYLON.MeshBuilder.CreateGround(
        "ground",
        { width: 20, height: 20 },
        scene
    );
    ground.checkCollisions = true;

    /* MURS DU LABYRINTHE */
    const wallMaterial = new BABYLON.StandardMaterial("wallMat", scene);
    wallMaterial.diffuseColor = new BABYLON.Color3(0.6, 0.6, 0.6);

    function createWall(x, z) {
        const wall = BABYLON.MeshBuilder.CreateBox(
            "wall",
            { width: 2, height: 2, depth: 2 },
            scene
        );
        wall.position.set(x, 1, z);
        wall.material = wallMaterial;
        wall.checkCollisions = true;
    }

    createWall(0, 0);
    createWall(2, 0);
    createWall(2, 2);
    createWall(-2, 2);
    createWall(-2, 4);

    /* SORTIE */
    const exit = BABYLON.MeshBuilder.CreateBox(
        "exit",
        { size: 1.5 },
        scene
    );
    exit.position.set(4, 1, 4);
    exit.material = new BABYLON.StandardMaterial("exitMat", scene);
    exit.material.diffuseColor = new BABYLON.Color3(0, 1, 0);

    scene.onBeforeRenderObservable.add(() => {
        if (BABYLON.Vector3.Distance(camera.position, exit.position) < 1.5) {
            console.log("ðŸŽ‰ Victoire : labyrinthe terminÃ© !");
        }
    });

    return scene;
};

const scene = create
